<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Site title -->
    <title>Parkeergarage dashboard</title>

    <!-- Bootstrap -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Css -->
    <style>
        p. {
            font-family: "Roboto";
        }
    </style>
</head>

<body>

<!-- Files van het mapje "Static" inladen -->
{% load staticfiles %}

<!-- Achtergrond foto en logo -->
<div class="row" align="center">
    <div class="col" style="background-image:url('{% static 'images/background_picture.png' %}');">
        <img src="{% static 'images/wf2.png' %}" align="center" hspace="20" height="150" width="250" alt="Logo">
    </div>
</div>

<!-- Eerste row voor de:
- Titel: "Recent aangemelde gebruikers" 
-->
<div class="row">
    <div class="col-6 text-center">
        <div class="center" style="margin-top: 30px;">
            <h4><strong>Recent aangemelde gebruikers:</strong></h4>
        </div>
    </div>
    <div class="col-6 text-center">
    </div>
</div>

<!-- Tweede row voor de:
- Het tonen van de recent aangemelde gebruikers
- Placeholder
-->
<div class="row">
    <div class="col-6 text-center">
        <div class="center" style="margin-top: 30px;">
            <ul class="list-group" style="margin-top: 30px;">
                {% if current_data_sensor %}
                <li class="list-group-item" style="border: none">{% for current_data in current_data_sensor%} Naam: <b>{{current_data.cardID}}</b>,
                    Tijd ingecheckt: <b>{{current_data.created_at}}</b> Geautoriseerd:
                    <b>{{current_data.authorised}}</b></br>{%endfor%}
                </li>
                {% else %}
                <li class="list-group-item" style="border: none">Er zijn vandaag geen gebruikers ingecheckt</li>
                {% endif %}
        </div>
    </div>
    <div class="col-6 text-center">
        <div style="margin-right: 100px;" align="left">
            <ul class="list-group" style="margin-top: 30px;">
                <li class="list-group-item" style="border: none"><p>Placeholder</p></li>
            </ul>
        </div>
    </div>
</div>
<hr>

<!-- Derde row voor de:
- Eerste grafiek: 
- Tweede grafiek:
-->
<div style="margin-top: 75px;" align="center">
    <form method="get" action="/">
        <p style="font-size:20px;">Specifieke dag zoeken
            <input type="date" name="date" data-date-inline-picker="true" required></p>
        <button class="btn btn-warning text-white" type="submit"
                style="padding: 10px 20px; font-size: 20px; border-radius: 10px; width:120px; margin-top: 30px;"><b>Zoeken</b>
        </button>
    </form>
</div>

<hr>

<!--Grafieken-->
<div class="row">
    <div class="col-6 text-center">
        <div align="center">

            <!--Grafiek 1-->
            <div id="ParkeerGrafiek1">
                <canvas id="myChart"></canvas>
                <script src="{% static 'node_modules/chart.js/dist/Chart.js' %}"></script>
                <div class="chart-container" style="position: relative; height:10vh; width:45vw">
                    <script>
                        var canvas = document.getElementById("myChart");
                        var ctx = canvas.getContext('2d');

                        // Globale opties:
                        Chart.defaults.global.defaultFontColor = 'black';
                        Chart.defaults.global.defaultFontSize = 16;

                        var data = {
                            // Label opties
                            labels: ["Geautoriseerde gebruikers", "Niet geautoriseerde gebruikers"],

                            // Datasets opties
                            datasets: [
                                {
                                    fill: true,
                                    backgroundColor: [
                                        '#FFC904',
                                        '#FAA419'],
                                    data: [{{authorised_true.count}
                                }, {{authorised_false.count}
                        }
                        ],
                        borderWidth: [1, 1]
                        }
                        ]
                        }
                        ;

                        // Opties
                        var options = {
                            title: {
                                display: true,
                                text: 'Alle geautoriseerde en niet geautoriseerde gebruikers',
                                position: 'top'
                            },
                            rotation: -0.7 * Math.PI
                        };

                        // Grafiek soort
                        var myBarChart = new Chart(ctx, {
                            type: 'doughnut',
                            data: data,
                            options: options
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6 text-center">
        <div align="center">

            <!--Grafiek 2-->
            <div id="ParkeerGrafiek2">
                <canvas id="myChart2"></canvas>
                <script src="{% static 'node_modules/chart.js/dist/Chart.js' %}"></script>
                <div class="chart-container" style="position: relative; height:10vh; width:45vw">
                    <script>
                        var canvas = document.getElementById("myChart2");
                        var ctx = canvas.getContext('2d');

                        // Globale opties
                        Chart.defaults.global.defaultFontColor = 'black';
                        Chart.defaults.global.defaultFontSize = 16;

                        var data = {
                            // Label opties
                            labels: ["Aantal ongeautoriseerde gebruikers die geprobeerd hebben binnen te komen"],

                            // Positie
                            position: 'top',

                            // Datasets opties
                            datasets: [
                                {
                                    fill: true,
                                    label: 'Aantal ingecheckte personen op geselecteerde datum',
                                    backgroundColor: [
                                        '#FFF579'],
                                    data: [{ % if date %
                                }{{date.count}
                        }
                        {%else%
                        }
                        0
                        {%
                            endif %
                        }
                        ],
                        borderWidth: [1, 1]
                        }
                        ]
                        }
                        ;

                        // Notice the rotation from the documentation.
                        var options = {
                            title: {
                                display: true,
                                text: 'Ongeautoriseerde gebruikers',
                                position: 'top'
                            },
                            rotation: -0.7 * Math.PI
                        };

                        // Grafiek soort:
                        var myBarChart = new Chart(ctx, {
                            type: 'bar',
                            data: data,
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true,
                                            callback: function (value) {
                                                if (value % 1 === 0) {
                                                    return value;
                                                }
                                            }
                                        }
                                    }]
                                }
                            }
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>